"use strict";var cx={version:"0.9.4",initFunctions:[],addInitFunction:function(a){cx.initFunctions.push(a)},init:function(){for(var b=0,a=cx.initFunctions.length;b<a;b++){cx.initFunctions[b]()}}};console.log("Complex "+cx.version);(function(){var a=function(){this.tag=null;this.debugable=true};cx.GameObject=a})();(function(){var a=function(){cx.GameObject.call(this)};a.prototype=Object.create(cx.GameObject.prototype);a.prototype.constructor=a;cx.Component=a})();(function(){var a=function(){ow.GameObject.call(this);this.components=[];this.alive=true;this.remove=false};a.prototype=Object.create(cx.GameObject);a.prototype.constructor=a;a.prototype.getWorld=function(){return this.world};a.prototype.setWorld=function(b){this.world=b};a.prototype.addComponent=function(b){var c=this._getFreeSlot();if(c!=null){this.components[c]=b}else{this.components.push(b)}};a.prototype.getComponent=function(c){for(var e=0,b=this.components.length;e<b;e++){var d=this.components[e];if(d.tag==c){return d}}return null};a.prototype.removeComponent=function(c){for(var e=0,b=this.components.length;e<b;e++){var d=this.components[e];if(d.tag==c){delete this.components[e]}}};a.prototype.getComponents=function(){return this.components};a.prototype._getFreeSlot=function(){for(var e=0,b=this.components.length;e<b;e++){var d=this.components[e];if(d==undefined||d==null){return e}}return null};a.prototype.destroy=function(){this.alive=false;this.remove=true},cx.Entity=a})();(function(){var a=function(){cx.GameObject.call(this);this.world=null;this.tag=null};a.TYPE_VOID="void";a.TYPE_PROCESS="process";a.prototype=Object.create(cx.GameObject);a.prototype.constructor=a;a.prototype.addedToWorld=function(){};a.prototype.added=function(b){};a.prototype.removed=function(b){};a.prototype.setWorld=function(b){this.world=b};a.prototype.getWorld=function(){return this.world};cx.System=a})();(function(){var a=function(){cx.System.call(this);this.components=[];this.type=cx.System.TYPE_PROCESS};a.prototype=Object.create(cx.System);a.prototype.constructor=a;a.prototype.update=function(b,c){};cx.EntitySystem=a})();(function(){var a=function(){cx.System.call(this);this.type=cx.System.TYPE_VOID};a.prototype=Object.create(cx.System);a.prototype.consctructor=a;a.prototype.update=function(){};cx.VoidSystem=a})();(function(){var a=function(){cx.GameObject.call(this);this.entities=[];this.voidSystems=[];this.entitySystems=[];this.managers=[];this.tag="cx.World"};a.prototype=Object.create(cx.GameObject);a.prototype.constructor=a;a.prototype.addEntity=function(b){var c=this._getFreeEntitySlot();b.setWorld(this);if(c!=null){b.index=c;this.entities[c]=b}else{b.index=this.entities.length;this.entities.push(b)}this._entityAdded(b)};a.prototype.removeEntity=function(b){this._entityDeleted(b);delete this.entities[b.index]};a.prototype.getEntity=function(b){return this.entities[b]};a.prototype.getEntities=function(){var f=[];for(var d=0,b=this.entities.length;d<b;d++){var c=this.entities[d];if(c==undefined||c==null){continue}f.push(c)}return f};a.prototype.addSystem=function(b){b.setWorld(this);if(b.type==cx.System.TYPE_PROCESS){var c=this._getFreeProcessSystemSlot();if(c!=null){this.entitySystems[c]=b}else{this.entitySystems.push(b)}}else{if(b.type==cx.System.TYPE_VOID){var c=this._getFreeProcessSystemSlot();if(c!=null){this.voidSystems[c]=b}else{this.voidSystems.push(b)}}}b.addedToWorld()};a.prototype.getSystem=function(e){var d="";if(typeof e=="string"){d=e}else{d=e.tag}for(var c=0,b=this.entitySystems.length;c<b;c++){var e=this.entitySystems[c];if(e.tag==d){return e}}for(var c=0,b=this.voidSystems.length;c<b;c++){var e=this.voidSystems[c];if(e.tag==d){return e}}return null};a.prototype.getSystems=function(b){if(b=="process"){return this.entitySystems}if(b=="void"){return this.voidSystems}};a.prototype.removeSystem=function(e){var d="";if(typeof e=="string"){d=e}else{d=e.tag}for(var c=0,b=this.entitySystems.length;c<b;c++){var e=this.entitySystems[c];if(e.tag==d){delete this.entitySystems[c]}}for(var c=0,b=this.voidSystems.length;c<b;c++){var e=this.voidSystems[c];if(e.tag==d){delete this.voidSystems[c]}}};a.prototype.addManager=function(b){b.world=this;this.managers.push(b)};a.prototype.getManager=function(c){for(var e=0,b=this.managers.length;e<b;e++){var d=this.managers[e];if(d.tag==c){return this.managers[e]}}return null};a.prototype.update=function(){for(var o=0,j=this.voidSystems.length;o<j;o++){var c=this.voidSystems[o];c.update()}for(var o=0,j=this.entitySystems.length;o<j;o++){var c=this.entitySystems[o];for(var i=0,g=this.entities.length;i<g;i++){var h=this.entities[i];if(h==null){continue}if(!h.alive&&h.remove){this.removeEntity(h);continue}if(!h.alive){continue}var k=[];var l=true;for(var b=0,d=c.components.length;b<d;b++){var f=c.components[b];var n=false;var m=h.getComponent(f);if(m!=null){k[f]=m;n=true}if(!n){l=false}}if(l){c.update(h,k)}}}};a.prototype._getFreeEntitySlot=function(){for(var d=0,b=this.entities.length;d<b;d++){var c=this.entities[d];if(c==null||c==undefined){return d}}return null};a.prototype._getFreeProcessSystemSlot=function(){for(var c=0,b=this.entitySystems.length;c<b;c++){var d=this.entitySystems[c];if(d==undefined||d==null){return c}}return null};a.prototype._getFreeVoidSystemSlot=function(){for(var c=0,b=this.voidSystems.length;c<b;c++){var d=this.voidSystems[c];if(d==undefined||d==null){return c}}return null};a.prototype._entityAdded=function(c){for(var d=0,b=this.voidSystems.length;d<b;d++){var e=this.voidSystems[d];e.added(c)}for(var d=0,b=this.entitySystems.length;d<b;d++){var e=this.entitySystems[d];e.added(c)}};a.prototype._entityDeleted=function(c){for(var d=0,b=this.voidSystems.length;d<b;d++){var e=this.voidSystems[d];e.removed(c)}for(var d=0,b=this.entitySystems.length;d<b;d++){var e=this.entitySystems[d];e.removed(c)}};cx.World=a})();(function(){var a=function(){cx.GameObject.call(this);this.tag=null;this.world=null};a.prototype=Object.create(cx.GameObject);a.prototype.constructor=a;cx.Manager=a})();