<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Complexjs by faebeee</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Complexjs</h1>
        <h2>JS Component Entity System</h2>
        <a href="https://github.com/faebeee/complexJS" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="complexjs" class="anchor" href="#complexjs"><span class="octicon octicon-link"></span></a>ComplexJS</h1>

<p>ComplexJS is a JS written Component Entity System for HTML5 Gamedevelopment.
ComplexJS has the ability not to slow your development time down.
With it's Component Entity System there is a high rate of reusable code for your later projects.</p>

<h2>
<a name="build" class="anchor" href="#build"><span class="octicon octicon-link"></span></a>Build</h2>

<p>You can build ComplexJS by your own. There is a dev.js script where all the files are defined which will be compiled to gether into build/complex.js
Therefore you need to install <code>littlehelper</code> via npm</p>

<pre>
$ npm install littlehelper
</pre>

<h1>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h1>

<p>Createa HTMLFile containing your view.
Add ComplexJS as a source
<code>&lt;script type="text/javascript" src="./libs/complex.js"&gt;&lt;/script&gt;</code></p>

<h2>
<a name="world" class="anchor" href="#world"><span class="octicon octicon-link"></span></a>World</h2>

<p>The world is the mainobject holding all the entities and systems.
If you want to make your game work you have to write an update loop and call <code>world.update</code> every tick
Therefore I created a small lib called <a href="https://github.com/faebeee/Animloop">Animloop.js</a></p>

<h3>
<a name="create-the-world" class="anchor" href="#create-the-world"><span class="octicon octicon-link"></span></a>Create the world</h3>

<pre>
var world = new cx.World();
</pre>

<h3>
<a name="update-the-world" class="anchor" href="#update-the-world"><span class="octicon octicon-link"></span></a>Update the world</h3>

<p>Override the updatefunction of the animloop object. After calling <code>animloop.init()</code> the function <code>animloop.update()</code> is called every tick</p>

<pre>
animloop.update = function(){
    world.update();
}
animloop.init();
</pre>

<h2>
<a name="systems" class="anchor" href="#systems"><span class="octicon octicon-link"></span></a>Systems</h2>

<p>The system is handling the datahandling of all components. For example moving around a object or rendering all entities to the canvas.
There where 2 different systemtypes <code>cx.EntitySystem</code> and <code>cx.VoidSystem</code></p>

<h4>
<a name="cxentitysystem" class="anchor" href="#cxentitysystem"><span class="octicon octicon-link"></span></a>cx.EntitySystem</h4>

<p>The EntitySystem is a system which reacts on entites which owns the same components as configured in the system</p>

<pre>
var MySystem = cx.EntitySystem.extend({
    tag : "MySystem", // used to identify the system and retrive it back from the world
    components : ["PositionComponent", "SizeComponents"], // the value of the tag property in your components

    //constructor
    init : function(){

    },
     /**
     * called for an entity if the required components are matching these of the entity
     * @param entity
     * @param componens Key Value store. Components can be accessed with the componentName `components["myComponent"]`
     */
    update : function( entity, componens){
        //do what ever you want with your entity and its components
    }
});
</pre>

<h4>
<a name="cxvoidsystem" class="anchor" href="#cxvoidsystem"><span class="octicon octicon-link"></span></a>cx.VoidSystem</h4>

<p>VoidSystem is a system which does not react on each entity but is called everytime <code>world.update</code> is called. With this system you can easily implement other libraries like PIXI.js where you only have to call <code>update()</code> once every tick</p>

<pre>
var PixiSystem = cx.VoidSystem.extend({
    tag : 'PixiSystem',

    init : function(){
        this.stage = new PIXI.Stage(0x66FF99);
        this.renderer = PIXI.autoDetectRenderer(400, 300);
        this.type = this.TYPE_VOID;

        document.body.appendChild(this.renderer.view);
    },

    //called when an entity is added to world
    added : function ( entity ){
        var spriteComponent = null
        if ( (spriteComponent = entity.getComponent('sprite')) != null ){
            this.stage.addChild(spriteComponent.sprite);
        }
    },

    update: function () {
        this.renderer.render(this.stage);
    }
});
</pre>

<h3>
<a name="use-a-system" class="anchor" href="#use-a-system"><span class="octicon octicon-link"></span></a>Use a system</h3>

<p>To make a system working you have to add it to the <code>cx.World</code></p>

<pre>
world.addSystem(new MySystem());
</pre>

<h3>
<a name="get-a-system" class="anchor" href="#get-a-system"><span class="octicon octicon-link"></span></a>Get a system</h3>

<p>To retrive a system you can call <code>getSystem(name)</code> where you have access to the world object.
The parameter <code>tag</code> is the tag property of each system and should be unique</p>

<pre>
world.getSystem("PixiSystem")
</pre>

<h2>
<a name="entities" class="anchor" href="#entities"><span class="octicon octicon-link"></span></a>Entities</h2>

<p>An entity is just a holder for several components.</p>

<h3>
<a name="create-entity" class="anchor" href="#create-entity"><span class="octicon octicon-link"></span></a>Create entity</h3>

<pre>
var hero = new cx.Entity();
</pre>

<h3>
<a name="add-entity" class="anchor" href="#add-entity"><span class="octicon octicon-link"></span></a>Add entity</h3>

<p>To process and access all the components added to an entity you have to add it to the <code>cx.World</code> object. So every tick the systems can handle and modify the components data</p>

<pre>
world.addEntity(hero);
</pre>

<h2>
<a name="components" class="anchor" href="#components"><span class="octicon octicon-link"></span></a>Components</h2>

<p>A Component is a object which holds data for a specific entity. This data is processed by a system</p>

<h3>
<a name="create-a-component" class="anchor" href="#create-a-component"><span class="octicon octicon-link"></span></a>Create a Component</h3>

<p>A Component have to extend the <code>cx.Component</code> class</p>

<pre>
var ScriptComponent = cx.Component.extend({
    tag:'cx.ScriptComponent', // defines a unique name to access this component later

    //properties
    script : null,
    setup : false,

    //constructor
    init : function(script){
        this.script = script;
    }
});
</pre>

<h3>
<a name="add-a-component" class="anchor" href="#add-a-component"><span class="octicon octicon-link"></span></a>Add a component</h3>

<p>To process the data in an component for a specific entity we have to add the component to that entity</p>

<pre>
var hero = new cx.Entity();
hero.addComponent(new ScriptComponent());
</pre>

<p>From now on you can access the <code>ScriptComponent</code> on the heroEntity</p>

<h3>
<a name="get-a-component" class="anchor" href="#get-a-component"><span class="octicon octicon-link"></span></a>Get a component</h3>

<p>To access the component and its data you can access it via its unique name</p>

<pre>
var scriptComponent = hero.getComponent("cx.ScriptComponent");
</pre>

<h2>
<a name="manager" class="anchor" href="#manager"><span class="octicon octicon-link"></span></a>Manager</h2>

<p>Coming soon...</p>

<h2>
<a name="scripting" class="anchor" href="#scripting"><span class="octicon octicon-link"></span></a>Scripting</h2>

<p>Some Scripting code ( System, Component and Scriptobject ) is already implemented in Complex to provide some functionality to script behaviour for a player or any game object.
For accessing the ScriptSystem you have to use the name <code>cx.ScriptSystem</code> and for the component use 'cx.ScriptComponent'</p>

<pre>
world.getSystem('cx.scriptsystem');
entity.getComponent('cx.ScriptComponent');
</pre>

<h3>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h3>

<p>Simply add the system to the world</p>

<pre>
world.addSystem(new ScriptSystem());
</pre>

<h3>
<a name="create-a-script" class="anchor" href="#create-a-script"><span class="octicon octicon-link"></span></a>Create a script</h3>

<p>A script is a object which extends from <code>cx.Script</code>. A script is some piece of logic which is updated every tick. Inside the script you have access to the entity the script is attached to with <code>this.entity</code></p>

<pre>
var MyBehaviour = cx.Script.extend({
    textComponent : null,
    velocity : 10,
    init : function(){

    },
    onSetup : function(){
        this.textComponent = this.entity.getComponent("TextComponent");
    },
    update : function(){
        if ( Input.Keyboard.isKeyDown("A") ) {
            this.textComponent.text.position.x-= this.velocity;
        }

        if ( Input.Keyboard.isKeyDown("W") ) {
            this.textComponent.text.position.y-= this.velocity;
        }

        if ( Input.Keyboard.isKeyDown("S") ) {
            this.textComponent.text.position.y+= this.velocity;
        }

        if ( Input.Keyboard.isKeyDown("D") ) {
            this.textComponent.text.position.x+= this.velocity;
        }
    }
});

</pre>

<h3>
<a name="finishing-up" class="anchor" href="#finishing-up"><span class="octicon octicon-link"></span></a>Finishing up</h3>

<p>At the end you just have to add the script to a component and the component to an entity and you're done</p>

<pre>
entity.addComponent(new ScriptComponent( new MyBehaviour() ));
</pre>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<p>Check out the <a href="https://github.com/faebeee/complex-demo/tree/master/shootemup">example</a></p>

<h3>
<a name="scripting-1" class="anchor" href="#scripting-1"><span class="octicon octicon-link"></span></a>Scripting</h3>

<p><a href="https://github.com/faebeee/complexJS/tree/master/src/Custom/Script">Code</a></p>

<p>Provieds simple per entity behaviour</p>

<h3>
<a name="debug" class="anchor" href="#debug"><span class="octicon octicon-link"></span></a>Debug</h3>

<p><a href="https://github.com/faebeee/complexJS/tree/master/src/Custom/Debug">Code</a></p>

<p>Provides a debugoutput via DatGuiSystem with data of the components of an entity</p>

<h3>
<a name="stats" class="anchor" href="#stats"><span class="octicon octicon-link"></span></a>Stats</h3>

<p><a href="https://github.com/faebeee/complexJS/tree/master/src/Custom/Stats">Code</a></p>

<p>Add stats view to the window. <code>world.addSystem(new StatsSystem());</code>.</p>

<p><i>Note: include the stats.js lib</i></p>

<h3>
<a name="datgui" class="anchor" href="#datgui"><span class="octicon octicon-link"></span></a>DatGui</h3>

<p><a href="https://github.com/faebeee/complexJS/tree/master/src/Custom/DatGui">Code</a></p>

<p>Adds a dat.gui view to the window.</p>

<p><i>Note: Include dat.gui lib</i></p>

<h2>
<a name="demos" class="anchor" href="#demos"><span class="octicon octicon-link"></span></a>Demos</h2>

<p><a href="https://github.com/faebeee/complex-demo">Here</a></p>

<p><a href="https://github.com/faebeee/complex-demo/tree/master/shootemup">shootemup</a></p>

<h2>
<a name="contribution" class="anchor" href="#contribution"><span class="octicon octicon-link"></span></a>Contribution</h2>

<p>Just contribute. It's OpenSource</p>

<h2>
<a name="contact" class="anchor" href="#contact"><span class="octicon octicon-link"></span></a>Contact</h2>

<p><a href="https://twitter.com/faebeee">@Twitter</a><br><a href="https://plus.google.com/u/0/113673733496424994581/posts">+Google</a></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/faebeee/complexJS/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/faebeee/complexJS/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/faebeee/complexJS"></a> is maintained by <a href="https://github.com/faebeee">faebeee</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-45541044-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>